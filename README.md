# Systolic_array

## Модуль syst_wd

    Весовые коэфиценты для каждого узла массива динамические и задаются с помощью регистров на APB.

## Модуль syst_wrapper

    На входе - пришедшее слово захлопывается в регистры вместе сигналом валидности, 
    также организованы линии задержки, чтобы систолический массив мог получать данные на 
    каждом такте и сдвиговый регистр, распространяющий сигнал валидности вместе с данными.
    Далее на выходе систолического массива также линии задержки, и регистры перемещающие сигнал
    валидности для каждого выхода массива вместе с данными, сигнал валидности - enable 
    для регистров сохраняющию данные , далее данные выравниваются и захлопываются в выходной регистр, 
    сигнал валидности захлопывается с одного из сигналов систолического массива , у меня с 4.
    
    Для весов также веден сигнал валидности.
    Веса также захлопываются в соответсвующий адресу регистр, и передаются в узлы.

## Модуль syst_fifo

     К предыдущему модулю подключается fifo на основе BRAM глубиной 256, 
     сигналы для записи и чтения из fifo  формируются так,  wr_en = valid_ffo_i & (~full);
     rd_en = ~empty & (ready_i); где valid_ffo_i - флаг валидности данных из систолического массива ,  
     ready сигнал от мастера, сигнал валидности данных полученных с fifo формируется, 
     как ~empty далее записывается в регистр для создания задержки , так как чтение из fifo синхронное.

## Модуль syst_APB

    Сделан по примеру из лабораторной работы, по адресу 0 запись, по адресу 4 чтение. 
    По адресам с 8 по 20 включительно задаются веса систолического массива.

## matrix_mult

    Первое умножение матриц
     ![pic1](https://github.com/Tynnalian/Systolic_array/blob/dynamic/pic/pic1.png?raw=true)
    
    Второе умножение матриц
     ![pic2](https://github.com/Tynnalian/Systolic_array/blob/dynamic/pic/pic2.png?raw=true)

    Третье умножение матриц
     ![pic3](https://github.com/Tynnalian/Systolic_array/blob/dynamic/pic/pic2.png?raw=true)
